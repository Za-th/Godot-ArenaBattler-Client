[gd_scene load_steps=22 format=3 uid="uid://dhvfh5rcc75q4"]

[ext_resource type="Script" path="res://scripts/Interactables.gd" id="3_3wchs"]
[ext_resource type="Script" path="res://interactables/npcs/scripts/box.gd" id="4_x8kmx"]
[ext_resource type="Script" path="res://interactables/npcs/scripts/bob.gd" id="5_s6oxi"]
[ext_resource type="PackedScene" uid="uid://cxrsevcsew0sh" path="res://interactables/level_switches/tutorial_level_switch.tscn" id="6_efcvp"]
[ext_resource type="PackedScene" uid="uid://chgs4n41gf2mv" path="res://resource_scenes/healthbar.tscn" id="7_qxpjr"]

[sub_resource type="NavigationMesh" id="NavigationMesh_a55gk"]
vertices = PackedVector3Array(-49.5, 0.370181, -1, -9.25, 0.370181, -0.75, -9, 0.370181, -2.5, -7, 0.370181, -49.5, -49.5, 0.370181, -49.5, -9, 0.370181, -2.5, -7, 0.370181, -2.5, -7, 0.370181, -49.5, -7, 0.370181, -2.5, -5.75, 0.370181, -2.5, -5.75, 0.370181, -49.5, -7, 0.370181, -49.5, -3.75, 0.370181, -2.25, 2.75, 0.370181, -1.75, 3.5, 0.370181, -1.75, 3.5, 0.370181, -49.5, -5.75, 0.370181, -49.5, -5.75, 0.370181, -2.5, 4.5, 0.370181, -1.5, 4.5, 0.370181, 0, 49.5, 0.370181, 0, 3.5, 0.370181, -1.75, 4.5, 0.370181, -1.5, 49.5, 0.370181, 0, 49.5, 0.370181, -49.5, 3.5, 0.370181, -49.5, -3.5, 0.370181, 2.5, 2.75, 0.370181, 1.75, 2.25, 0.370181, 1.5, -3.75, 0.620181, 1.5, -3.5, 0.370181, 2.5, 2.25, 0.370181, 1.5, 2.25, 0.370181, -1.5, -3.75, 0.620181, -1.5, 2.25, 0.370181, -1.5, 2.75, 0.370181, -1.75, -3.75, 0.370181, -2.25, -3.75, 0.620181, -1.5, -3.75, 0.620181, -1.5, -9, 4.12018, -1.5, -9, 4.12018, 1.5, -3.75, 0.620181, 1.5, -49.5, 0.370181, 1.25, -9.25, 0.370181, 1, -9.25, 0.370181, -0.75, -49.5, 0.370181, -1, 49.5, 0.370181, 0, 4.5, 0.370181, 0, 4.5, 0.370181, 1.5, 49.5, 0.370181, 0, 4.5, 0.370181, 1.5, 3.5, 0.370181, 1.75, 3.5, 0.370181, 49.5, 49.5, 0.370181, 49.5, -9.25, 0.370181, 2.5, -9.25, 0.370181, 1, -49.5, 0.370181, 1.25, -7.5, 0.370181, 2.75, -9.25, 0.370181, 2.5, -49.5, 0.370181, 1.25, -49.5, 0.370181, 49.5, -7.75, 0.370181, 49.5, 3.5, 0.370181, 1.75, 2.75, 0.370181, 1.75, -3.5, 0.370181, 2.5, -5.25, 0.370181, 2.75, -5, 0.370181, 49.5, 3.5, 0.370181, 49.5, -7.75, 0.370181, 49.5, -5, 0.370181, 49.5, -5.25, 0.370181, 2.75, -7.5, 0.370181, 2.75)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 4), PackedInt32Array(2, 4, 3), PackedInt32Array(7, 6, 5), PackedInt32Array(11, 10, 8), PackedInt32Array(8, 10, 9), PackedInt32Array(13, 12, 14), PackedInt32Array(14, 12, 17), PackedInt32Array(14, 17, 16), PackedInt32Array(14, 16, 15), PackedInt32Array(20, 19, 18), PackedInt32Array(22, 21, 23), PackedInt32Array(23, 21, 25), PackedInt32Array(23, 25, 24), PackedInt32Array(28, 27, 26), PackedInt32Array(29, 33, 30), PackedInt32Array(30, 33, 31), PackedInt32Array(31, 33, 32), PackedInt32Array(37, 36, 34), PackedInt32Array(34, 36, 35), PackedInt32Array(41, 40, 38), PackedInt32Array(38, 40, 39), PackedInt32Array(43, 42, 44), PackedInt32Array(44, 42, 45), PackedInt32Array(48, 47, 46), PackedInt32Array(50, 49, 51), PackedInt32Array(51, 49, 52), PackedInt32Array(52, 49, 53), PackedInt32Array(56, 55, 54), PackedInt32Array(58, 57, 59), PackedInt32Array(59, 57, 61), PackedInt32Array(59, 61, 60), PackedInt32Array(63, 62, 64), PackedInt32Array(64, 62, 65), PackedInt32Array(65, 62, 66), PackedInt32Array(66, 62, 67), PackedInt32Array(71, 70, 68), PackedInt32Array(68, 70, 69)]
agent_height = 2.0

[sub_resource type="BoxShape3D" id="BoxShape3D_tl2a2"]
size = Vector3(100, 1, 100)

[sub_resource type="BoxMesh" id="BoxMesh_axcoj"]
size = Vector3(100, 0, 100)

[sub_resource type="BoxMesh" id="BoxMesh_i1d3t"]

[sub_resource type="BoxShape3D" id="BoxShape3D_scrxi"]
size = Vector3(10, 1, 4)

[sub_resource type="BoxMesh" id="BoxMesh_i84d7"]
size = Vector3(10, 1, 4)

[sub_resource type="BoxShape3D" id="BoxShape3D_8wb7r"]
size = Vector3(1, 2.70072, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_toml5"]
albedo_color = Color(0.701961, 0.407843, 0.341176, 1)

[sub_resource type="BoxMesh" id="BoxMesh_86q4g"]
material = SubResource("StandardMaterial3D_toml5")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ir20b"]
albedo_color = Color(0.588235, 0, 0.596078, 1)

[sub_resource type="TextMesh" id="TextMesh_khrov"]
material = SubResource("StandardMaterial3D_ir20b")
text = "You fool, you cretin, you buffon."
font_size = 80

[sub_resource type="ViewportTexture" id="ViewportTexture_0w4jc"]
viewport_path = NodePath("Interactables/npcs/box/name/SubViewport")

[sub_resource type="LabelSettings" id="LabelSettings_bwy2f"]
font_size = 80
font_color = Color(0, 0, 0, 1)

[sub_resource type="ViewportTexture" id="ViewportTexture_fjh0p"]
viewport_path = NodePath("Interactables/npcs/bob/healthbar/SubViewport")

[sub_resource type="GDScript" id="GDScript_mv2rk"]
script/source = "extends Sprite3D


# Called when the node enters the scene tree for the first time.
func _ready():
	texture = $SubViewport.get_texture()


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(_delta):
	pass
"

[sub_resource type="ViewportTexture" id="ViewportTexture_68qks"]
viewport_path = NodePath("Interactables/npcs/bob/name/SubViewport")

[node name="Test Level" type="Node3D"]
transform = Transform3D(1.00012, 0, 0, 0, 1.00012, 0, 0, 0, 1.00012, 0, 0, 0)

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_a55gk")

[node name="ClickArea" type="StaticBody3D" parent="NavigationRegion3D"]

[node name="floor_collision" type="CollisionShape3D" parent="NavigationRegion3D/ClickArea"]
shape = SubResource("BoxShape3D_tl2a2")

[node name="floor" type="MeshInstance3D" parent="NavigationRegion3D/ClickArea"]
mesh = SubResource("BoxMesh_axcoj")

[node name="wall" type="MeshInstance3D" parent="NavigationRegion3D/ClickArea"]
transform = Transform3D(1.09271, 0, 0, 0, 4.76897, 0, 0, 0, 2.305, 3.43205, 2.04118, 0)
mesh = SubResource("BoxMesh_i1d3t")
skeleton = NodePath("../..")

[node name="slope_collision" type="CollisionShape3D" parent="NavigationRegion3D/ClickArea"]
transform = Transform3D(0.837137, 0.546994, 0, -0.546994, 0.837137, 0, 0, 0, 1, -5.55957, 0.762712, 0)
shape = SubResource("BoxShape3D_scrxi")

[node name="slope" type="MeshInstance3D" parent="NavigationRegion3D/ClickArea"]
transform = Transform3D(0.838671, 0.544639, 0, -0.544639, 0.838671, 0, 0, 0, 1, -5.55957, 0.762712, 0)
mesh = SubResource("BoxMesh_i84d7")

[node name="Interactables" type="Node3D" parent="."]
script = ExtResource("3_3wchs")

[node name="npcs" type="Node3D" parent="Interactables"]

[node name="box" type="StaticBody3D" parent="Interactables/npcs"]
transform = Transform3D(1.00012, 0, 0, 0, 1.00012, 0, 0, 0, 1.00012, 0, 0.50006, -7.45865)
script = ExtResource("4_x8kmx")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Interactables/npcs/box"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.253509, 0)
shape = SubResource("BoxShape3D_8wb7r")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Interactables/npcs/box"]
transform = Transform3D(1, 0, 0, 0, 2.62848, 0, 0, 0, 1, 0, 0.410889, 0)
mesh = SubResource("BoxMesh_86q4g")

[node name="speech" type="MeshInstance3D" parent="Interactables/npcs/box"]
transform = Transform3D(1, 0, 0, 0, 0.707107, 0.707107, 0, -0.707107, 0.707107, 2.49211, 3.78956, -0.650779)
visible = false
mesh = SubResource("TextMesh_khrov")

[node name="name" type="Sprite3D" parent="Interactables/npcs/box"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3, 0)
billboard = 1
texture = SubResource("ViewportTexture_0w4jc")

[node name="SubViewport" type="SubViewport" parent="Interactables/npcs/box/name"]
transparent_bg = true

[node name="Label2" type="Label" parent="Interactables/npcs/box/name/SubViewport"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -84.5
offset_top = -55.0
offset_right = 84.5
offset_bottom = 55.0
grow_horizontal = 2
grow_vertical = 2
text = "BOX"
label_settings = SubResource("LabelSettings_bwy2f")

[node name="bob" type="StaticBody3D" parent="Interactables/npcs"]
transform = Transform3D(1.00012, 0, 0, 0, 1.00012, 0, 0, 0, 1.00012, 16, 0.50006, 8.04397)
script = ExtResource("5_s6oxi")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Interactables/npcs/bob"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.596847, 0)
shape = SubResource("BoxShape3D_8wb7r")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Interactables/npcs/bob"]
transform = Transform3D(1, 0, 0, 0, 2.42282, 0, 0, 0, 1, 0, 0.733045, 0)
mesh = SubResource("BoxMesh_86q4g")

[node name="healthbar" type="Sprite3D" parent="Interactables/npcs/bob"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.34061, 0)
billboard = 1
texture = SubResource("ViewportTexture_fjh0p")
script = SubResource("GDScript_mv2rk")

[node name="SubViewport" type="SubViewport" parent="Interactables/npcs/bob/healthbar"]
transparent_bg = true
gui_disable_input = true

[node name="Node2D" parent="Interactables/npcs/bob/healthbar/SubViewport" instance=ExtResource("7_qxpjr")]

[node name="name" type="Sprite3D" parent="Interactables/npcs/bob"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3, 0)
billboard = 1
texture = SubResource("ViewportTexture_68qks")

[node name="SubViewport" type="SubViewport" parent="Interactables/npcs/bob/name"]
transparent_bg = true
gui_disable_input = true

[node name="Label" type="Label" parent="Interactables/npcs/bob/name/SubViewport"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -84.5
offset_top = -55.0
offset_right = 84.5
offset_bottom = 55.0
grow_horizontal = 2
grow_vertical = 2
text = "BOB"
label_settings = SubResource("LabelSettings_bwy2f")

[node name="level_switches" type="Node3D" parent="Interactables"]

[node name="tutorial_level_switch" parent="Interactables/level_switches" instance=ExtResource("6_efcvp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 13.949, 0.1, 0)

[node name="MultiplayerSpawner" type="MultiplayerSpawner" parent="."]
_spawnable_scenes = PackedStringArray("res://resource_scenes/player.tscn")
spawn_path = NodePath("..")

[node name="CreatureSpawner" type="MultiplayerSpawner" parent="."]
_spawnable_scenes = PackedStringArray("res://creatures/bird.tscn", "res://creatures/cat.tscn", "res://creatures/dog.tscn", "res://creatures/rat.tscn")
spawn_path = NodePath("..")
